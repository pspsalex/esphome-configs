# https://www.figma.com/design/ZVGRhTI7JuHMEa6QWwVMeY/Untitled?node-id=2-3&t=wM3IiGyDEG3TYO9H-0

substitutions:
  device_name: "sdl"
  friendly_name: "SDL"

packages:
  base: !include config/base.yaml
  device: !include config/device/host.yaml
  theme: !include config/lvgl/themes/grayscale.yaml
  weather: !include config/weather.yaml

esphome:
  on_boot:
    - priority: -100
      then:
        - lvgl.widget.hide: boot_screen

# pip install cairosvg
image:
  - file: "assets/images/esphome_logo.svg"
    id: boot_logo
    resize: 597x117
    type: RGB565
    transparency: alpha_channel

lvgl:
  style_definitions:
    - id: header_footer
      bg_color: 0xFFFFFF
      bg_opa: COVER
      border_color: 0x000000
      border_width: 1
      text_color: 0x000000
      text_font: icons_large
      pad_row: 4
      pad_column: 4

    - id: clean_obj
      border_width: 0
      pad_all: 0
      radius: 0
      outline_width: 0
      shadow_width: 0

    - id: main_controls_button
      border_width: 0
      pad_all: 0
      radius: 0
      outline_width: 0
      shadow_width: 0

    - id: main_controls_button_pressed
      border_width: 0
      pad_all: 0
      radius: 0
      outline_width: 1
      shadow_width: 0

    - id: main_controls_button_focused
      border_width: 0
      pad_all: 0
      radius: 0
      outline_width: 0
      shadow_width: 0

    - id: main_controls_button_checked
      bg_color: 0x666666

    - id: main_controls
      border_width: 2
      border_opa: COVER
      border_color: 0xcccccc
      radius: 5
      pad_all: 5
      width: 145
      height: 145

    - id: main_controls_label
      width: 130
      height: 40
      border_width: 4
      border_color: 0xcccccc
      border_opa: COVER
      border_side: TOP
      text_font: "roboto_24"
      text_align: center

  pages:
    - id: main_page
      bg_opa: COVER
      bg_color: 0xffffff
      widgets:
        - obj:
            id: main_left_pane
            styles: clean_obj
            width: 460
            height: 522
            x: 9
            y: 9
            layout:
              type: FLEX
              flex_flow: ROW_WRAP
              flex_align_main: START
              flex_align_cross: SPACE_EVENLY
              flex_align_track: SPACE_AROUND

            widgets:
              - obj:
                  id: main_left_date_date
                  width: 460
                  height: 40
                  styles: clean_obj
                  layout:
                    type: FLEX
                    flex_flow: ROW
                    flex_align_main: SPACE_BETWEEN
                  widgets:
                    - label:
                        id: main_left_date_weekday
                        text: "Aaaaaaa"
                        text_font: "roboto_32_bold"
                    - label:
                        id: main_left_date_day
                        text: "xx Xxxxxxx"
                        text_font: "roboto_32"
              - obj:
                  width: 460
                  height: 120
                  styles: clean_obj
                  id: main_left_date_time
                  layout:
                    type: FLEX
                    flex_flow: ROW
                    flex_align_main: CENTER
                    flex_align_cross: CENTER
                  widgets:
                    - label:
                        id: main_left_date_hour
                        text: "HH"
                        text_font: "roboto_96_num_bold"
                    - label:
                        id: main_left_date_minute
                        text: ":MM"
                        text_font: "roboto_96_num"

              - obj:
                  id: main_left_splitter1
                  width: 460
                  height: 2
                  bg_opa: COVER
                  bg_color: 0xd9d9d9
                  styles: clean_obj

              - label:
                  id: main_left_weather_logo_now
                  width: 130
                  height: 150
                  text: "\uf172"
                  text_font: "weather_xxl"

              - obj:
                  id: main_left_weather_data
                  height: 150
                  width: 200
                  bg_opa: TRANSP
                  styles: clean_obj
                  layout:
                    type: FLEX
                    flex_flow: COLUMN
                    flex_align_main: CENTER
                    flex_align_cross: CENTER
                    flex_align_track: CENTER
                  widgets:
                    - obj:
                        id: main_left_weather_temp
                        width: 155
                        height: 90
                        radius: 0
                        styles: clean_obj
                        layout:
                          type: FLEX
                          flex_flow: ROW
                          flex_align_main: CENTER
                        widgets:
                          - label:
                              id: main_left_weather_temp_now
                              text: "??"
                              height: 90
                              text_font: "roboto_80_num_bold"
                          - label:
                              id: main_left_weather_temp_txt
                              text: "\u00b0C"
                              text_font: "roboto_32"
                    - label:
                        id: main_left_weather_temp_feels
                        text: "Feels like: ??\u00b0C"
                        text_font: "roboto_16"
                    - label:
                        id: main_left_weather_temp_rain
                        text: "Rain: ??%"
                        text_font: "roboto_16"

              - obj:
                  id: main_left_weather_details
                  width: 110
                  height: 150
                  styles: clean_obj
                  layout:
                    type: FLEX
                    flex_flow: COLUMN
                    flex_align_main: SPACE_BETWEEN
                  widgets:
                    - obj:
                        id: main_left_weather_details_sunrise_cont
                        styles: clean_obj
                        width: SIZE_CONTENT
                        height: 38
                        layout:
                          type: FLEX
                          flex_flow: ROW
                          flex_align_main: START
                          flex_align_cross: CENTER
                        widgets:
                          - label:
                              id: main_left_weather_details_sunrise_logo
                              text: "\ue81a"
                              text_font: "icons_large"
                          - label:
                              id: main_left_weather_details_sunrise
                              text: "hh:mm"
                              text_font: "roboto_16"
                    - obj:
                        id: main_left_weather_details_sunset_cont
                        styles: clean_obj
                        width: SIZE_CONTENT
                        height: 38
                        layout:
                          type: FLEX
                          flex_flow: ROW
                          flex_align_main: START
                          flex_align_cross: CENTER
                        widgets:
                          - label:
                              id: main_left_weather_details_sunset_logo
                              text: "\ue1c6"
                              text_font: "icons_large"
                          - label:
                              id: main_left_weather_details_sunset
                              text: "HH:MM"
                              text_font: "roboto_16"
                    - obj:
                        id: main_left_weather_details_wind_cont
                        styles: clean_obj
                        bg_color: 0xffffff
                        bg_opa: COVER
                        width: SIZE_CONTENT
                        height: 38
                        layout:
                          type: FLEX
                          flex_flow: ROW
                          flex_align_main: START
                          flex_align_cross: CENTER
                        widgets:
                          - label:
                              id: main_left_weather_details_wind_logo
                              text: "\uefd8"
                              text_font: "icons_large"
                          - label:
                              id: main_left_weather_details_wind
                              text: "??km/h"
                              text_font: "roboto_16"

              - obj:
                  id: main_left_splitter_1
                  width: 460
                  height: 2
                  bg_opa: COVER
                  bg_color: 0xd9d9d9
                  styles: clean_obj

              - obj:
                  id: main_left_forecast
                  styles: clean_obj
                  width: 460
                  height: SIZE_CONTENT
                  layout:
                    type: FLEX
                    flex_flow: ROW
                    flex_align_main: SPACE_EVENLY
                    flex_align_cross: START
                  widgets:
                    - obj:
                        id: main_left_forecast_4h
                        styles: clean_obj
                        layout:
                          type: FLEX
                          flex_flow: COLUMN
                          flex_align_main: START
                          flex_align_cross: CENTER
                        widgets:
                          - label:
                              id: main_left_forecast_4h_time
                              text: "hh:mm"
                              text_font: "roboto_24"
                          - label:
                              id: main_left_forecast_4h_icon
                              text: "\ue81a"
                              text_font: "icons_large"
                          - label:
                              id: main_left_forecast_4h_temp
                              text: "??\u00b0C / ??%"
                              text_font: "roboto_24"
                    - obj:
                        id: main_left_forecast_8h
                        styles: clean_obj
                        layout:
                          type: FLEX
                          flex_flow: COLUMN
                          flex_align_main: START
                          flex_align_cross: CENTER
                        widgets:
                          - label:
                              id: main_left_forecast_8h_time
                              text: "hh:mm"
                              text_font: "roboto_24"
                          - label:
                              id: main_left_forecast_8h_icon
                              text: "\ue81a"
                              text_font: "icons_large"
                          - label:
                              id: main_left_forecast_8h_temp
                              text_font: "roboto_24"
                              text: "??\u00b0C / ??%"
                    - obj:
                        id: main_left_forecast_12h
                        styles: clean_obj
                        layout:
                          type: FLEX
                          flex_flow: COLUMN
                          flex_align_main: START
                          flex_align_cross: CENTER
                        widgets:
                          - label:
                              id: main_left_forecast_12h_time
                              text: "hh:mm"
                              text_font: "roboto_24"
                          - label:
                              id: main_left_forecast_12h_icon
                              text: "\ue81a"
                              text_font: "icons_large"
                          - label:
                              id: main_left_forecast_12h_temp
                              text: "??\u00b0C / ??%"
                              text_font: "roboto_24"

        - obj:
            id: main_pane_splitter
            width: 4
            x: 478
            y: 9
            height: 522
            bg_opa: COVER
            bg_color: 0xd9d9d9
            styles: clean_obj

        - obj:
            id: main_right_pane
            styles: clean_obj
            x: 491
            y: 60
            width: 460
            height: 470
            layout:
              type: FLEX
              flex_flow: ROW_WRAP
              flex_align_main: SPACE_BETWEEN
              flex_align_cross: START
            bg_color: 0xffffff
            bg_opa: COVER
            widgets:
              - obj:
                  id: main_right_dani_ro
                  styles: main_controls
                  layout:
                    type: FLEX
                    flex_flow: ROW_WRAP
                    flex_align_main: SPACE_BETWEEN
                    flex_align_cross: CENTER
                    flex_align_track: SPACE_BETWEEN
                  widgets:
                    - button:
                        id: main_controls_dani_down
                        state:
                          disabled: true
                        width: 55
                        height: 85
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        on_press:
                          then:
                            - if:
                                condition:
                                  lambda: |-
                                    return id(cover_dani_state).state == "closing";
                                then:
                                  - logger.log: "Stopping Dani cover"
                                  - homeassistant.action:
                                      action: cover.stop_cover
                                      data:
                                        entity_id: cover.dani_rollers_cover_1
                                else:
                                  - logger.log: "Opening Dani cover"
                                  - homeassistant.action:
                                      action: cover.close_cover
                                      data:
                                        entity_id: cover.dani_rollers_cover_1
                        widgets:
                          - label:
                              id: main_controls_dani_down_label
                              text: "\ue313"
                              text_font: "icons_xlarge"
                              align: center
                    - slider:
                        id: main_controls_dani_slider
                        state:
                          disabled: true
                        width: 5
                        height: 85
                        on_change:
                          then:
                            - homeassistant.action:
                                action: cover.set_cover_position
                                data:
                                  entity_id: cover.dani_rollers_cover_1
                                  position: !lambda "return x;"
                    - button:
                        id: main_controls_dani_up
                        state:
                          disabled: true
                        width: 55
                        height: 85
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        on_press:
                          then:
                            - if:
                                condition:
                                  lambda: |-
                                    return id(cover_dani_state).state == "opening";
                                then:
                                  - logger.log: "Stopping Dani cover"
                                  - homeassistant.action:
                                      action: cover.stop_cover
                                      data:
                                        entity_id: cover.dani_rollers_cover_1
                                else:
                                  - logger.log: "Opening Dani cover"
                                  - homeassistant.action:
                                      action: cover.open_cover
                                      data:
                                        entity_id: cover.dani_rollers_cover_1
                        widgets:
                          - label:
                              id: main_controls_dani_up_label
                              text: "\ue316"
                              text_font: "icons_xlarge"
                              align: center
                    - label:
                        text: "Dani"
                        styles: main_controls_label
                        long_mode: DOT
              - obj:
                  id: main_right_oli_ro
                  styles: main_controls
                  layout:
                    type: FLEX
                    flex_flow: ROW_WRAP
                    flex_align_main: SPACE_BETWEEN
                    flex_align_cross: CENTER
                    flex_align_track: SPACE_BETWEEN
                  widgets:
                    - button:
                        id: main_controls_oli_down
                        state:
                          disabled: true
                        width: 55
                        height: 85
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        widgets:
                          - label:
                              id: main_controls_oli_down_label
                              text: "\ue313"
                              text_font: "icons_xlarge"
                              align: center
                        on_press:
                          then:
                            - if:
                                condition:
                                  lambda: |-
                                    return id(cover_oli_state).state == "closing";
                                then:
                                  - logger.log: "Stopping Oli cover"
                                  - homeassistant.action:
                                      action: cover.stop_cover
                                      data:
                                        entity_id: cover.oli_roller_cover_1
                                else:
                                  - logger.log: "Opening Oli cover"
                                  - homeassistant.action:
                                      action: cover.close_cover
                                      data:
                                        entity_id: cover.oli_roller_cover_1
                    - slider:
                        id: main_controls_oli_slider
                        state:
                          disabled: true
                        width: 5
                        height: 85
                        on_change:
                          then:
                            - homeassistant.action:
                                action: cover.set_cover_position
                                data:
                                  entity_id: cover.oli_rollers_cover_1
                                  position: !lambda "return x;"
                    - button:
                        id: main_controls_oli_up
                        state:
                          disabled: true
                        width: 55
                        height: 85
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        widgets:
                          - label:
                              id: main_controls_oli_up_label
                              text: "\ue316"
                              text_font: "icons_xlarge"
                              align: center
                        on_press:
                          then:
                            - if:
                                condition:
                                  lambda: |-
                                    return id(cover_oli_state).state == "opening";
                                then:
                                  - logger.log: "Stopping Oli cover"
                                  - homeassistant.action:
                                      action: cover.stop_cover
                                      data:
                                        entity_id: cover.oli_roller_cover_1
                                else:
                                  - logger.log: "Opening Oli cover"
                                  - homeassistant.action:
                                      action: cover.open_cover
                                      data:
                                        entity_id: cover.oli_roller_cover_1
                    - label:
                        text: "Oli"
                        styles: main_controls_label
                        long_mode: DOT
              - obj:
                  id: main_right_eltern_ro
                  styles: main_controls
                  layout:
                    type: FLEX
                    flex_flow: ROW_WRAP
                    flex_align_main: SPACE_BETWEEN
                    flex_align_cross: CENTER
                    flex_align_track: SPACE_BETWEEN
                  widgets:
                    - button:
                        id: main_controls_eltern_down
                        state:
                          disabled: true
                        width: 55
                        height: 85
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        widgets:
                          - label:
                              id: main_controls_eltern_down_label
                              text: "\ue313"
                              text_font: "icons_xlarge"
                              align: center
                        on_press:
                          then:
                            - if:
                                condition:
                                  lambda: |-
                                    return id(cover_eltern_state).state == "closing";
                                then:
                                  - logger.log: "Stopping Eltern cover"
                                  - homeassistant.action:
                                      action: cover.stop_cover
                                      data:
                                        entity_id: cover.eltern_rollers_cover_1
                                else:
                                  - logger.log: "Opening Eltern cover"
                                  - homeassistant.action:
                                      action: cover.close_cover
                                      data:
                                        entity_id: cover.eltern_rollers_cover_1
                    - slider:
                        id: main_controls_eltern_slider
                        state:
                          disabled: true
                        width: 5
                        height: 85
                        on_change:
                          then:
                            - homeassistant.action:
                                action: cover.set_cover_position
                                data:
                                  entity_id: cover.eltern_rollers_cover_1
                                  position: !lambda "return x;"
                    - button:
                        id: main_controls_eltern_up
                        state:
                          disabled: true
                        width: 55
                        height: 85
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        widgets:
                          - label:
                              id: main_controls_eltern_up_label
                              text: "\ue316"
                              text_font: "icons_xlarge"
                              align: center
                        on_press:
                          then:
                            - if:
                                condition:
                                  lambda: |-
                                    return id(cover_eltern_state).state == "opening";
                                then:
                                  - logger.log: "Stopping Eltern cover"
                                  - homeassistant.action:
                                      action: cover.stop_cover
                                      data:
                                        entity_id: cover.eltern_rollers_cover_1
                                else:
                                  - logger.log: "Opening Eltern cover"
                                  - homeassistant.action:
                                      action: cover.open_cover
                                      data:
                                        entity_id: cover.eltern_rollers_cover_1
                    - label:
                        text: "Eltern"
                        styles: main_controls_label
                        long_mode: DOT
              - obj:
                  id: main_right_living_rol
                  styles: main_controls
                  layout:
                    type: FLEX
                    flex_flow: ROW_WRAP
                    flex_align_main: SPACE_BETWEEN
                    flex_align_cross: CENTER
                    flex_align_track: SPACE_BETWEEN
                  widgets:
                    - button:
                        id: main_controls_living_rol_down
                        state:
                          disabled: true
                        width: 55
                        height: 85
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        widgets:
                          - label:
                              id: main_controls_living_rol_down_label
                              text: "\ue313"
                              text_font: "icons_xlarge"
                              align: center
                        on_press:
                          then:
                            - if:
                                condition:
                                  lambda: |-
                                    return id(cover_living_rol_state).state == "closing";
                                then:
                                  - logger.log: "Stopping Living Large cover"
                                  - homeassistant.action:
                                      action: cover.stop_cover
                                      data:
                                        entity_id: cover.living_large_rollers_cover_1
                                else:
                                  - logger.log: "Opening Living Large cover"
                                  - homeassistant.action:
                                      action: cover.close_cover
                                      data:
                                        entity_id: cover.living_large_rollers_cover_1
                    - slider:
                        id: main_controls_living_rol_slider
                        state:
                          disabled: true
                        width: 5
                        height: 85
                        on_change:
                          then:
                            - homeassistant.action:
                                action: cover.set_cover_position
                                data:
                                  entity_id: cover.living_large_rollers_cover_1
                                  position: !lambda "return x;"
                    - button:
                        id: main_controls_living_rol_up
                        state:
                          disabled: true
                        width: 55
                        height: 85
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        widgets:
                          - label:
                              id: main_controls_living_rol_up_label
                              text: "\ue316"
                              text_font: "icons_xlarge"
                              align: center
                        on_press:
                          then:
                            - if:
                                condition:
                                  lambda: |-
                                    return id(cover_living_rol_state).state == "opening";
                                then:
                                  - logger.log: "Stopping Living Large cover"
                                  - homeassistant.action:
                                      action: cover.stop_cover
                                      data:
                                        entity_id: cover.living_large_rollers_cover_1
                                else:
                                  - logger.log: "Opening Living Large cover"
                                  - homeassistant.action:
                                      action: cover.open_cover
                                      data:
                                        entity_id: cover.living_large_rollers_cover_1
                    - label:
                        text: "Living L"
                        styles: main_controls_label
                        long_mode: DOT
              - obj:
                  id: main_right_living_ros
                  styles: main_controls
                  layout:
                    type: FLEX
                    flex_flow: ROW_WRAP
                    flex_align_main: SPACE_BETWEEN
                    flex_align_cross: CENTER
                    flex_align_track: SPACE_BETWEEN
                  widgets:
                    - button:
                        id: main_controls_living_ros_down
                        state:
                          disabled: true
                        width: 55
                        height: 85
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        widgets:
                          - label:
                              id: main_controls_living_ros_down_label
                              text: "\ue313"
                              text_font: "icons_xlarge"
                              align: center
                        on_press:
                          then:
                            - if:
                                condition:
                                  lambda: |-
                                    return id(cover_living_ros_state).state == "closing";
                                then:
                                  - logger.log: "Stopping Living Small cover"
                                  - homeassistant.action:
                                      action: cover.stop_cover
                                      data:
                                        entity_id: cover.living_small_roller_cover_1
                                else:
                                  - logger.log: "Opening Living Small cover"
                                  - homeassistant.action:
                                      action: cover.close_cover
                                      data:
                                        entity_id: cover.living_small_roller_cover_1
                    - slider:
                        id: main_controls_living_ros_slider
                        state:
                          disabled: true
                        width: 5
                        height: 85
                        on_change:
                          then:
                            - homeassistant.action:
                                action: cover.set_cover_position
                                data:
                                  entity_id: cover.living_small_roller_cover_1
                                  position: !lambda "return x;"
                    - button:
                        id: main_controls_living_ros_up
                        state:
                          disabled: true
                        width: 55
                        height: 85
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        widgets:
                          - label:
                              id: main_controls_living_ros_up_label
                              text: "\ue316"
                              text_font: "icons_xlarge"
                              align: center
                        on_press:
                          then:
                            - if:
                                condition:
                                  lambda: |-
                                    return id(cover_living_ros_state).state == "opening";
                                then:
                                  - logger.log: "Stopping Living Small cover"
                                  - homeassistant.action:
                                      action: cover.stop_cover
                                      data:
                                        entity_id: cover.living_small_roller_cover_1
                                else:
                                  - logger.log: "Opening Living Small cover"
                                  - homeassistant.action:
                                      action: cover.open_cover
                                      data:
                                        entity_id: cover.living_small_roller_cover_1
                    - label:
                        text: "Living S"
                        styles: main_controls_label
                        long_mode: DOT
              - obj:
                  id: main_right_studio_night
                  styles: main_controls
                  layout:
                    type: FLEX
                    flex_flow: ROW_WRAP
                    flex_align_main: SPACE_BETWEEN
                    flex_align_cross: CENTER
                    flex_align_track: SPACE_BETWEEN
                  widgets:
                    - button:
                        id: main_controls_dach_rollers
                        state:
                          disabled: true
                        width: 130
                        height: 85
                        styles: clean_obj
                        focused:
                          styles: clean_obj
                        pressed:
                          styles: clean_obj
                        edited:
                          styles: clean_obj
                        widgets:
                          - label:
                              text: "\ue2a7"
                              text_font: "icons_xlarge"
                              align: center
                    - label:
                        text: "Dach Rollers"
                        styles: main_controls_label
                        long_mode: DOT
              - obj:
                  id: main_right_office_light
                  styles: main_controls
                  layout:
                    type: FLEX
                    flex_flow: ROW_WRAP
                    flex_align_main: SPACE_BETWEEN
                    flex_align_cross: CENTER
                    flex_align_track: SPACE_BETWEEN
                  widgets:
                    - button:
                        id: main_controls_office_light
                        state:
                          disabled: true
                        width: 130
                        height: 85
                        checkable: true
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        checked:
                          styles:
                            - main_controls_button_checked
                        widgets:
                          - label:
                              id: main_controls_office_light_state
                              text: "\ue0f0"
                              text_font: "icons_xlarge"
                              align: center
                        on_click:
                          - homeassistant.action:
                              action: light.toggle
                              data:
                                entity_id: light.kg_office_light
                    - label:
                        text: "Office Light"
                        styles: main_controls_label
                        long_mode: DOT
              - obj:
                  id: main_right_keller_light
                  styles: main_controls
                  layout:
                    type: FLEX
                    flex_flow: ROW_WRAP
                    flex_align_main: SPACE_BETWEEN
                    flex_align_cross: CENTER
                    flex_align_track: SPACE_BETWEEN
                  widgets:
                    - button:
                        id: main_controls_keller_light_long
                        state:
                          disabled: true
                        width: 130
                        height: 85
                        checkable: true
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        checked:
                          styles:
                            - main_controls_button_checked
                        widgets:
                          - label:
                              id: main_controls_keller_light_long_state
                              text: "\ue0f0"
                              text_font: "icons_xlarge"
                              align: center
                        on_click:
                          - homeassistant.action:
                              action: light.toggle
                              data:
                                entity_id: light.kg_keller_light_long
                          - if:
                              condition:
                                binary_sensor.is_on: kg_keller_light_long
                              then:
                                - homeassistant.action:
                                    # The "new" state is not yet propagated
                                    action: light.turn_off
                                    data:
                                      entity_id: light.kg_keller_light_big
                              else:
                                - homeassistant.action:
                                    action: light.turn_on
                                    data:
                                      entity_id: light.kg_keller_light_big

                    - label:
                        text: "Keller Lights"
                        styles: main_controls_label
                        long_mode: DOT
              - obj:
                  id: main_right_dach_light
                  styles: main_controls
                  layout:
                    type: FLEX
                    flex_flow: ROW_WRAP
                    flex_align_main: SPACE_BETWEEN
                    flex_align_cross: CENTER
                    flex_align_track: SPACE_BETWEEN
                  widgets:
                    - button:
                        id: main_controls_dach_light
                        state:
                          disabled: true
                        width: 130
                        height: 85
                        checkable: true
                        styles:
                          - main_controls_button
                        pressed:
                          styles:
                            - main_controls_button_pressed
                        focused:
                          styles:
                            - main_controls_button_focused
                        checked:
                          styles:
                            - main_controls_button_checked
                        widgets:
                          - label:
                              text: "\ue0f0"
                              text_font: "icons_xlarge"
                              align: center
                    - label:
                        text: "Dach Lights"
                        styles: main_controls_label
                        long_mode: DOT

    - id: main_page_backup
      # make all flex, each entry on its own row?
      widgets:
        - obj:
            id: top_bar_date
            align: TOP_LEFT
            x: 0
            y: 0
            pad_all: 10
            height: 100
            bg_color: 0xc1c1c1
            bg_opa: COVER
            width: 100%
            scrollbar_mode: "OFF"
            widgets:
              - label:
                  text: "Welcome!"
                  align: CENTER
                  text_font: roboto_48
                  id: lbl_top_bar_time
              - label:
                  text: " "
                  align: LEFT_MID
                  text_font: roboto_24
                  id: lbl_top_bar_date
        - obj:
            height: 340
            bg_color: 0xdddddd
            width: 100%
            pad_all: 0
            radius: 0
            border_opa: TRANSP
            x: 0
            y: 100
            id: main_area
            layout:
              type: FLEX
              flex_flow: ROW
              flex_align_main: SPACE_EVENLY
              flex_align_cross: START
            widgets:
              # forecast image, 290x290, left column
              # preview forecast rows, 3, 200x85 right column, padding-left: 15px
              #   forecast image, 60x60, left column in row
              #   forecast temperature, font size 24px
              - label:
                  id: weather
                  text: "\U0000f172"
                  align: LEFT_MID
                  border_color: 0x000000
                  border_width: 2
                  text_font: weather_xxl
                  width: 290
                  height: 290
                  bg_color: 0x339999
                  bg_opa: COVER
              - obj:
                  bg_color: 0x993399
                  bg_opa: cover
                  width: 200
                  radius: 0
                  border_opa: TRANSP
                  height: 290
                  pad_all: 0
                  layout:
                    type: FLEX
                    flex_flow: COLUMN
                    flex_align_main: SPACE_EVENLY
                    flex_align_cross: SPACE_EVENLY
                    flex_align_track: END
                  id: preview_area
                  widgets:
                    - obj:
                        bg_color: 0xee66ee
                        bg_opa: COVER
                        border_opa: TRANSP
                        radius: 0
                        height: 85
                        width: 190
                        pad_all: 0
                        layout:
                          type: FLEX
                          flex_flow: ROW
                          flex_align_main: START
                          flex_align_cross: START
                        widgets:
                          - label:
                              text: "\U0000e2bd"
                              text_font: "icons_large"
                          - label:
                              text: "-25\u00b0C"
                              text_font: "roboto_32"
                    - obj:
                        bg_color: 0xee66ee
                        bg_opa: COVER
                        border_opa: TRANSP
                        radius: 0
                        height: 85
                        width: 190
                        pad_all: 0
                        layout:
                          type: FLEX
                          flex_flow: ROW
                          flex_align_main: START
                          flex_align_cross: START
                        widgets:
                          - label:
                              text: "\U0000ebdb"
                              text_font: "icons_large"
                          - label:
                              text: "-25\u00b0C"
                              text_font: "roboto_32"
                    - obj:
                        bg_color: 0xee66ee
                        border_opa: TRANSP
                        radius: 0
                        bg_opa: COVER
                        height: 85
                        width: 190
                        pad_all: 0
                        layout:
                          type: FLEX
                          flex_flow: ROW
                          flex_align_main: START
                          flex_align_cross: START
                        widgets:
                          - label:
                              text: "\U0000ef44"
                              text_font: "icons_large"
                          - label:
                              text: "-25\u00b0C"
                              text_font: "roboto_32"
                  # grid, 2 rows, 3 columns
                  # item:
                  # 2 rows
                  # row 1: buttons, 55x65px, 5px margin, size to fit content
                  # 2 buttons for rollers + progress bar?
                  # 1 button for lights + progress bar - emtpy for off, full for on?
                  # row 2: name
                  # id: controls
                  # text: "Controls"
                  # align: RIGHT_MID
              - obj:
                  width: 420
                  bg_color: 0xff9999
                  bg_opa: COVER
        - obj:
            id: bottom_bar
            align: BOTTOM_LEFT
            x: 0
            y: 0
            pad_all: 10
            height: 100
            bg_color: 0xc1c1c1
            bg_opa: COVER
            width: 100%
            scrollbar_mode: "OFF"
            # 650 x 100
            # 285px centered label with temperature text
            # centered 2 row area
            # row 1: temp min / temp max
            # row 2: sunset / sunrise
            # 260px
            widgets:
              - label:
                  text: "continue weather"
                  align: RIGHT_MID
                  text_font: roboto_24
                  id: lbl_bottom_bar_weather

    - id: second_page
      widgets:
        - obj:
            align: TOP_MID
            styles: header_footer
            widgets:
              - label:
                  text_font: roboto_18
                  text: "A second page"
                  align: CENTER
                  text_align: CENTER
                  text_color: 0x000000

  top_layer:
    widgets:
      - obj:
          id: status_bar
          align: TOP_RIGHT
          pad_all: 0
          pad_right: 5
          height: 48
          x: -2
          y: 6
          border_side: NONE
          layout:
            type: FLEX
            pad_column: 0
            pad_row: 0
            flex_flow: ROW
            flex_align_main: END
          widgets:
            - label:
                text: "\U0000e2c1"
                pad_left: 5
                id: lbl_status_ha
                hidden: false
                text_align: right
                text_color: 0x000000
                text_font: icons_large
            - label:
                text: "\U0000f0ef"
                pad_left: 5
                id: lbl_status_wifi
                hidden: false
                text_align: right
                text_color: 0x000000
                text_font: icons_large
            - label:
                id: lbl_status_battery
                text_font: icons_large
                pad_left: 5
                text: "\U0000e1a6" # start with mdi-battery-unknown
      - obj:
          id: boot_screen
          x: 0
          y: 0
          width: 100%
          height: 100%
          bg_color: 0xffffff
          bg_opa: COVER
          radius: 0
          pad_all: 0
          border_width: 0
          widgets:
            - image:
                align: CENTER
                src: boot_logo
                y: -40
            - spinner:
                align: CENTER
                y: 95
                height: 50
                width: 50
                spin_time: 5s
                arc_length: 60deg
                arc_width: 8
                indicator:
                  arc_color: 0x666666
                  arc_width: 8
          on_press:
            - lvgl.widget.hide: boot_screen
